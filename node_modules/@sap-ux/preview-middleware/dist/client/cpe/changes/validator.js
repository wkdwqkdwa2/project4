"use strict";

sap.ui.define([], function () {
  "use strict";

  /**
   * Function to validate if a given value is a valid binding model.
   *
   * @param modifiedControl control to be modified.
   * @param value value to be checked.
   */
  function validateBindingModel(modifiedControl, value) {
    const bindingValue = value.replace(/[{}]/gi, '').trim();
    const bindingParts = bindingValue.split('>').filter(el => el !== '');
    if (!bindingParts.length) {
      throw new SyntaxError('Invalid binding string.');
    }
    if (bindingParts[0].trim() === 'i18n') {
      if (bindingParts.length === 2) {
        const resourceKey = bindingParts[1].trim();
        const resourceBundle = modifiedControl.getModel('i18n').getResourceBundle();
        if (!resourceBundle.getText(resourceKey, undefined, true)) {
          throw new SyntaxError('Invalid key in the binding string. Supported value pattern is {i18n>YOUR_KEY}. Check if the key already exists in i18n.properties.' + 'If not, add the key in the i18n.properties file and reload the editor for the new key to take effect.');
        }
      } else {
        throw new SyntaxError('Invalid binding string. Supported value pattern is {i18n>YOUR_KEY}');
      }
    }
  }
  var __exports = {
    __esModule: true
  };
  __exports.validateBindingModel = validateBindingModel;
  return __exports;
});
//# sourceMappingURL=validator.js.map